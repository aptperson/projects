"""
This will take a look at the day before, during, and after a user-provided list of events.
We can then backtest what 1-Day (Close to Close), Intraday (Open to Close), and overnight (Close to Open)
Returns look like for ETFs.

Included currently (as lists of dates):
FOMC Meetings
FOMC Minutes release
Beige Book release
VIX Futures Expiration (VIX OPEX)
SPY Monthly Options Expiration (SPY OPEX)
Triple Witching Day (SPY, ES, SPX OPEX, March, June, September, December)
CPI release
First/Last day of the month
Mid-week (paycheck effect)
ADP National Employment results releases

# upcoming month Example:
# September 2025 Calendar dates? (can be figured out in a day, really)
# FOMC Meetings/Minutes: 2025-09-17
# Beige Book: 2025-09-03
# VIX Futures Expiration 2025-09-17
# SPY Options Expiration 2025-09-19
# Triple Witching 2025-09-19
# CPI 2025-09-11
# First trading day of month 2025-09-02
# ADP National Employment Release 2025-09-04

"""
import time

# LIBRARIES
import pandas as pd
import yfinance as yf
import numpy as np
import matplotlib.pyplot as plt
from datetime import datetime
import ssl
context = ssl.create_default_context()
context.check_hostname = False
context.verify_mode = ssl.CERT_NONE
import warnings
warnings.filterwarnings("ignore")

start_date = "2005-01-01"
today = datetime.today().strftime('%Y-%m-%d')
risk_free_rate = 0.03/252
show_plots = True

# Date Lists:
# Just manually make the list:
fomc_meeting_dates = [
    # 2025
    # "2025-01-28",
    "2025-01-29",
    # "2025-03-18",
    "2025-03-19",
    # "2025-05-06",
    "2025-05-07",
    # "2025-06-17",
    "2025-06-18",
    # "2025-07-29",
    "2025-07-30",
    # "2025-09-16",
    "2025-09-17",
    # "2025-10-28",
    "2025-10-29",
    # "2025-12-09",
    "2025-12-10",

    # 2024
    # "2024-10-30",
    "2024-01-31",
    # "2024-03-19",
    "2024-03-20",
    # "2024-04-30",
    "2024-05-01",
    # "2024-06-11",
    "2024-06-12",
    # "2024-07-30",
    "2024-07-31",
    # "2024-09-17",
    "2024-09-18",
    # "2024-11-06",
    "2024-11-07",
    # "2024-12-17",
    "2024-12-18",

    # 2023
    # "2023-01-31",
    "2023-02-01",
    # "2023-03-21",
    "2023-03-22",
    # "2023-05-02",
    "2023-05-03",
    # "2023-06-13",
    "2023-06-14",
    # "2023-07-25",
    "2023-07-26",
    # "2023-09-19",
    "2023-09-20",
    # "2023-10-31",
    "2023-11-01",
    # "2023-12-12",
    "2023-12-13",

    # 2022
    # "2022-01-25",
    "2022-01-26",
    # "2022-03-15",
    "2022-03-16",
    # "2022-05-03",
    "2022-05-04",
    # "2022-06-14",
    "2022-06-15",
    # "2022-07-26",
    "2022-07-27",
    # "2022-09-20",
    "2022-09-21",
    # "2022-11-01",
    "2022-11-02",
    # "2022-12-13",
    "2022-12-14",

    # 2021
    # "2021-01-26",
    "2021-01-27",
    # "2021-03-16",
    "2021-03-17",
    # "2021-05-27",
    "2021-05-28",
    # "2021-06-15",
    "2021-06-16",
    # "2021-07-27",
    "2021-07-28",
    # "2021-09-21",
    "2021-09-22",
    # "2021-11-02",
    "2021-11-03",
    # "2021-12-14",
    "2021-12-15",

    # 2020
    # "2020-01-28",
    "2020-01-29",
    # "2020-03-03", "2020-03-15", # was unscheduled
    "2020-03-23",
    # "2020-04-28",
    "2020-04-29",
    # "2020-06-09",
    "2020-06-10",
    # "2020-07-28",
    "2020-07-29",
    # "2020-09-15",
    "2020-09-16",
    # "2020-11-04",
    "2020-11-05",
    # "2020-12-15",
    "2020-12-16",

    # 2019
    # "2019-01-29",
    "2019-01-30",
    # "2019-03-19",
    "2019-03-20",
    # "2019-04-30",
    "2019-05-01",
    # "2019-06-18",
    "2019-06-19",
    # "2019-07-30",
    "2019-07-31",
    # "2019-09-17",
    "2019-07-18",
    # "2019-10-04 unscheduled.
    # "2019-10-29",
    "2019-10-30",
    # "2019-12-10",
    "2019-12-11",

    # 2018
    # "2018-01-30",
    "2018-01-31",
    # "2018-03-20",
    "2018-03-21",
    # "2018-05-01",
    "2018-05-02",
    # "2018-06-12",
    "2018-06-13",
    # "2018-07-31",
    "2018-08-01",
    # "2018-09-25",
    "2018-09-26",
    # "2018-11-07",
    "2018-11-08",
    # "2018-12-18",
    "2018-12-19",

    # 2017
    # "2017-01-31",
    "2017-02-01",
    # "2017-03-14",
    "2017-03-15",
    # "2017-05-02",
    "2017-05-03",
    # "2017-06-13",
    "2017-06-14",
    # "2017-07-25",
    "2017-07-26",
    # "2017-09-19",
    "2017-09-20",
    # "2017-10-31",
    "2017-11-01",
    # "2017-12-12",
    "2017-12-13",

    # 2016
    # "2016-01-26",
    "2016-01-27",
    # "2016-03-15",
    "2016-03-16",
    # "2016-04-26",
    "2016-04-27",
    # "2016-06-14",
    "2016-06-15",
    # "2016-07-26",
    "2016-07-27",
    # "2016-09-20",
    "2016-09-21",
    # "2016-11-01",
    "2016-11-02",
    # "2016-12-13",
    "2016-12-14",

    # 2015
    # "2015-01-27",
    "2015-01-28",
    # "2015-03-17",
    "2015-03-18",
    # "2015-04-28",
    "2015-04-29",
    # "2015-06-17",
    "2015-06-18",
    # "2015-07-28",
    "2015-07-29",
    # "2015-09-16",
    "2015-09-17",
    # "2015-10-27",
    "2015-10-28",
    # "2015-12-15",
    "2015-12-16",

    # 2014
    "2014-01-28",
    # "2014-01-29",
    # 2014-03-04 unscheduled.
    # "2014-03-18",
    "2014-03-19",
    # "2014-04-29",
    "2014-04-30",
    # "2014-06-17",
    "2014-06-18",
    # "2014-07-29",
    "2014-07-30",
    # "2014-09-16",
    "2014-09-17",
    # "2014-10-28",
    "2014-10-29",
    # "2014-12-16",
    "2014-12-17",

    # 2013
    # "2013-01-29",
    "2013-01-30",
    # "2013-03-19",
    "2013-03-20",
    # "2013-04-30",
    "2013-05-01",
    # "2013-06-18",
    "2013-06-19",
    # "2013-07-30",
    "2013-07-31",
    # "2013-09-17",
    "2013-09-18",
    # "2013-10-16" unshceduled
    # "2013-10-29",
    "2013-10-30",
    # "2013-12-17",
    "2013-12-18",

    # 2012
    # "2012-01-24",
    "2024-01-25",
    "2012-03-13",
    # "2012-04-24",
    "2012-04-25",
    # "2012-06-19",
    "2012-06-20",
    # "2012-07-31",
    "2012-08-01",
    # "2012-09-12",
    "2012-09-13",
    # "2012-10-23",
    "2012-10-24",
    # "2012-12-11",
    "2012-12-12",

    # 2011
    # "2011-01-25",
    "2011-01-26",
    "2011-03-15",
    # "2011-04-26",
    "2011-04-27",
    # "2011-06-21",
    "2011-06-22",
    # "2011-08-01 Conference call?
    "2011-08-09",
    # "2011-09-20",
    "2011-09-21",
    # "2011-11-01",
    "2011-11-02",
    # 2011-11-28 Conference call?
    "2011-12-13"

    # 2010
    # "2010-01-26", 
    "2010-01-27",
    "2010-03-16",
    # "2010-04-27",
    "2010-04-28",
    # 2010-05-09 conference call?
    # "2010-06-22",
    "2010-06-23",
    "2010-08-10",
    "2010-09-21",
    # 2010-10-15
    # "2010-11-02",
    "2010-11-03",
    "2010-12-14",

    # 2009
    # "2009-01-16" conference call?
    # "2009-01-27",
    "2009-01-28",
    # 2009-02-09 conference call
    # "2009-03-17",
    "2009-03-18",
    # "2009-04-28",
    "2009-04-29",
    # 2009-06-03 conference call
    # "2009-06-23",
    "2009-06-24",
    # "2009-08-11",
    "2009-08-12",
    # "2009-09-22",
    "2009-09-23",
    # "2009-11-03",
    "2009-11-04",
    # "2009-12-15",
    "2009-12-16",

    # 2008
    # 2008-01-09 conference call
    # 2008-01-21 conference call
    "2008-01-29",
    # "2008-01-30",
    # 2008-03-10 conference call
    "2008-03-18",
    # "2008-04-29",
    "2008-04-30",
    # "2008-06-24",
    "2008-06-25",
    # 2008-07-24 conference call
    "2008-08-05",
    "2008-09-16",
    # 2008-09-29
    # 2008-10-07
    # "2008-10-28",
    "2008-10-29",
    # "2008-12-15",
    "2008-12-16",

    # 2007
    # "2007-01-30",
    "2007-01-31",
    # "2007-03-20",
    "2007-03-21",
    "2007-05-09",
    # "2007-06-27",
    "2007-06-28",
    "2007-08-07",
    # 2007-08-10
    # 2007-08-16
    "2007-09-18",
    # "2007-10-30",
    "2007-10-31",
    # 2007-12-06
    "2007-12-11",

    # 2006
    "2006-01-31",
    "2006-03-27",
    # "2006-03-28",
    "2006-05-10",
    # "2006-06-28",
    "2006-06-29",
    "2006-08-08",
    "2006-09-20",
    # "2006-10-24",
    "2006-10-25",
    "2006-12-12",

    # 2005
    # "2005-02-01",
    "2005-02-02",
    "2005-03-22",
    "2005-05-03",
    # "2005-06-29",
    "2005-06-30",
    "2005-08-09",
    "2005-09-20",
    "2005-11-01",
    "2005-12-13",
]
fomc_minutes_release_dates = [
    # 2025
    "2025-02-19",
    "2025-04-09",
    "2025-05-28",
    "2025-07-09",
    "2025-08-20",
    # 2024
    "2024-02-21",
    "2024-04-10",
    "2024-05-22",
    "2024-07-03",
    "2024-08-21",
    "2024-10-09",
    "2024-11-26",
    "2025-01-08",
    # 2023
    "2023-02-22",
    "2023-04-12",
    "2023-05-24",
    "2023-07-05",
    "2023-08-16",
    "2023-10-11",
    "2023-11-21",
    "2023-01-03",
    # 2022
    "2022-02-16",
    "2022-04-06",
    "2022-05-25",
    "2022-07-06",
    "2022-08-17",
    "2022-10-12",
    "2022-11-23",
    "2023-01-04",
    # 2021
    "2021-02-17",
    "2021-04-07",
    "2021-05-19",
    "2021-07-07",
    "2021-08-18",
    "2021-10-13",
    "2021-11-24",
    "2022-01-05",
    # 2020
    "2020-02-19",
    "2020-04-08",  # Unscheduled meeting, but minutes were scheduled.
    "2020-05-20",
    "2020-07-01",
    "2020-08-19",
    "2020-10-07",
    "2020-11-25",
    "2021-01-06",
    # 2019
    "2020-01-03",
    "2019-11-20",
    "2019-10-09",
    "2019-10-04",  # conference call minutes?
    "2019-08-21",
    "2019-07-10",
    "2019-05-22",
    "2019-04-10",
    "2019-02-20",
    # 2018
    "2019-01-09",
    "2018-11-29",
    "2018-10-17",
    "2018-08-22",
    "2018-07-05",
    "2018-05-23",
    "2018-04-11",
    "2018-02-21",
    # 2017
    "2018-01-03",
    "2017-10-11",
    "2017-08-16",
    "2017-07-05",
    "2017-05-24",
    "2017-04-05",
    "2017-02-22",
    # 2016
    "2017-01-04",
    "2016-11-23",
    "2016-10-12",
    "2016-08-17",
    "2016-07-06",
    "2016-05-18",
    "2016-04-06",
    "2016-02-17",
    # 2015
    "2016-01-06",
    "2015-11-18",
    "2015-10-08",
    "2015-08-19",
    "2015-07-08",
    "2015-05-20",
    "2015-04-08",
    "2015-02-18",
    "2015-01-07",
]
# Both Minutes and Meetings:
# Pre-24HR  Short Vol (sorta) (SVXY)
# During-24HR  - Short Vol (SVIX, SVXY)
# Post-24HR - Long Vol (UVXY, VIXY)


# Fed Beige Book (outlook on economy) 8X per year.
# https://www.federalreserve.gov/monetarypolicy/beigebook2025.htm
beige_book = [
    # 2025
    "2025-01-15",
    "2025-03-05",
    "2025-04-23",
    "2025-06-04",
    "2025-07-16",
    "2025-09-03",
    "2025-10-15",
    "2025-11-26",
    # 2024
    "2024-01-17",
    "2024-03-06",
    "2024-04-17",
    "2024-05-29",
    "2024-07-17",
    "2024-09-04",
    "2024-10-23",
    # 2023
    "2023-01-18",
    "2023-03-08",
    "2023-04-19",
    "2023-05-31",
    "2023-07-12",
    "2023-09-06",
    "2023-10-18",
    "2023-11-29",
    # 2022
    "2022-01-12",
    "2022-03-02",
    "2022-04-20",
    "2022-06-01",
    "2022-07-13",
    "2022-09-07",
    "2022-10-19",
    "2022-11-30",
    # 2021
    "2021-01-13",
    "2021-03-03",
    "2021-04-14",
    "2021-06-02",
    "2021-07-14",
    "2021-09-08",
    "2021-10-20",
    "2021-12-01",
    # 2020
    "2020-01-15",
    "2020-03-04",
    "2020-04-15",
    "2020-05-27",
    "2020-07-15",
    "2020-09-02",
    "2020-10-21",
    "2020-12-02",
    # 2019
    "2019-01-16",
    "2019-03-06",
    "2019-04-17",
    "2019-06-05",
    "2019-07-17",
    "2019-09-04",
    "2019-10-16",
    "2019-11-27",
    # 2018
    "2018-01-17",
    "2018-03-07",
    "2018-04-18",
    "2018-05-30",
    "2018-07-18",
    "2018-09-12",
    "2018-10-24",
    "2018-12-05",
    # 2017
    "2017-01-18",
    "2017-03-01",
    "2017-04-19",
    "2017-05-31",
    "2017-07-12",
    "2017-09-06",
    "2017-10-18",
    "2017-11-29",
    # 2016
    "2016-01-13",
    "2016-03-02",
    "2016-04-13",
    "2016-06-01",
    "2016-07-13",
    "2016-09-07",
    "2016-10-19",
    "2016-11-30",
    # 2015
    "2015-01-14",
    "2015-03-04",
    "2015-04-15",
    "2015-06-03",
    "2015-07-15",
    "2015-09-02",
    "2015-10-14",
    "2015-12-02",
    # 2014
    "2014-01-15",
    "2014-03-05",
    "2014-04-16",
    "2014-06-04",
    "2014-07-16",
    "2014-09-03",
    "2014-10-15",
    "2014-12-03",
    # 2013
    "2013-01-16",
    "2013-03-06",
    "2013-04-17",
    "2013-06-05",
    "2013-07-17",
    "2013-09-04",
    "2013-10-16",
    "2013-12-04",
    # 2012
    "2012-01-11",
    "2012-02-29",
    "2012-04-11",
    "2012-06-06",
    "2012-07-18",
    "2012-08-29",
    "2012-10-10",
    "2012-11-28",
    # 2011
    "2011-01-12",
    "2011-03-02",
    "2011-04-13",
    "2011-06-08",
    "2011-07-27",
    "2011-09-07",
    "2011-10-19",
    "2011-11-30",
    # 2010
    "2010-01-13",
    "2010-03-03",
    "2010-04-14",
    "2010-06-09",
    "2010-07-28",
    "2010-09-08",
    "2010-10-20",
    "2010-12-01",
    # 2009
    "2009-01-14",
    "2009-03-04",
    "2009-04-15",
    "2009-06-10",
    "2009-07-29",
    "2009-09-09",
    "2009-10-21",
    "2009-12-02",
    # 2008
    "2008-01-16",
    "2008-03-05",
    "2008-04-16",
    "2008-06-11",
    "2008-07-23",
    "2008-09-03",
    "2008-10-15",
    "2008-12-03",
    # 2007
    "2007-01-17",
    "2007-03-07",
    "2007-04-25",
    "2007-06-13",
    "2007-07-25",
    "2007-09-05",
    "2007-10-17",
    "2007-11-28",
    # 2006
    "2006-01-18",
    "2006-03-15",
    "2006-04-26",
    "2006-06-14",
    "2006-07-26",
    "2006-09-06",
    "2006-10-12",
    "2006-11-29",
    # 2005
    "2005-01-19",
    "2005-03-09",
    "2005-04-20",
    "2005-06-15",
    "2005-07-27",
    "2005-09-07",
    "2005-10-19",
    "2005-11-30",
    # 2004
    "2004-01-14",
    "2004-03-03",
    "2004-04-21",
    "2004-06-16",
    "2004-07-28",
    "2004-09-08",
    "2004-10-27",
    "2004-12-01",

]
# During 24HR short Vol

# what about CPI dates?
# https://alfred.stlouisfed.org/release/downloaddates?rid=10 (in a list)
# https://www.bls.gov/bls/archived_sched.htm
cpi_dates = [
'2005-01-19',
'2005-02-18',
'2005-02-23',
'2005-03-23',
'2005-04-20',
'2005-05-18',
'2005-06-15',
'2005-07-14',
'2005-08-16',
'2005-09-15',
'2005-10-14',
'2005-11-16',
'2005-12-15',
'2006-01-18',
'2006-02-17',
'2006-02-22',
'2006-03-16',
'2006-04-19',
'2006-05-17',
'2006-06-14',
'2006-07-19',
'2006-08-16',
'2006-09-15',
'2006-10-18',
'2006-11-16',
'2006-12-15',
'2007-01-18',
'2007-02-16',
'2007-02-21',
'2007-03-16',
'2007-04-17',
'2007-05-15',
'2007-06-15',
'2007-07-18',
'2007-08-15',
'2007-09-19',
'2007-10-17',
'2007-11-15',
'2007-12-14',
'2008-01-16',
'2008-02-15',
'2008-02-20',
'2008-03-14',
'2008-04-16',
'2008-05-14',
'2008-06-13',
'2008-07-16',
'2008-08-14',
'2008-09-16',
'2008-10-16',
'2008-11-19',
'2008-12-16',
'2009-01-16',
'2009-02-18',
'2009-02-20',
'2009-03-18',
'2009-04-15',
'2009-05-15',
'2009-06-17',
'2009-07-15',
'2009-08-14',
'2009-09-16',
'2009-10-15',
'2009-11-18',
'2009-12-16',
'2010-01-15',
'2010-02-17',
'2010-02-19',
'2010-03-18',
'2010-04-14',
'2010-05-19',
'2010-06-17',
'2010-07-16',
'2010-08-13',
'2010-09-17',
'2010-10-15',
'2010-11-17',
'2010-12-15',
'2011-01-14',
'2011-02-15',
'2011-02-17',
'2011-03-17',
'2011-04-15',
'2011-05-13',
'2011-06-15',
'2011-07-15',
'2011-08-18',
'2011-09-15',
'2011-10-19',
'2011-11-16',
'2011-12-16',
'2012-01-19',
'2012-02-15',
'2012-02-17',
'2012-03-16',
'2012-04-13',
'2012-05-15',
'2012-06-14',
'2012-07-17',
'2012-08-15',
'2012-09-14',
'2012-10-16',
'2012-11-15',
'2012-12-14',
'2013-01-16',
'2013-02-19',
'2013-02-21',
'2013-03-15',
'2013-04-16',
'2013-05-16',
'2013-06-18',
'2013-07-16',
'2013-08-15',
'2013-09-17',
'2013-10-30',
'2013-11-20',
'2013-12-17',
'2014-01-16',
'2014-02-18',
'2014-02-20',
'2014-03-18',
'2014-04-15',
'2014-05-15',
'2014-06-17',
'2014-07-22',
'2014-08-19',
'2014-09-17',
'2014-10-22',
'2014-11-20',
'2014-12-17',
'2015-01-16',
'2015-02-20',
'2015-02-26',
'2015-03-24',
'2015-04-17',
'2015-05-22',
'2015-06-18',
'2015-07-17',
'2015-08-19',
'2015-09-16',
'2015-10-15',
'2015-11-17',
'2015-12-15',
'2016-01-20',
'2016-02-19',
'2016-03-16',
'2016-04-14',
'2016-05-17',
'2016-06-16',
'2016-07-15',
'2016-08-16',
'2016-09-16',
'2016-10-18',
'2016-11-17',
'2016-12-15',
'2017-01-18',
'2017-02-13',
'2017-02-15',
'2017-03-15',
'2017-04-14',
'2017-05-12',
'2017-06-14',
'2017-07-14',
'2017-08-11',
'2017-09-14',
'2017-10-13',
'2017-11-15',
'2017-12-13',
'2018-01-12',
'2018-02-14',
'2018-03-13',
'2018-04-11',
'2018-05-10',
'2018-06-12',
'2018-07-12',
'2018-08-10',
'2018-09-13',
'2018-10-11',
'2018-11-14',
'2018-12-12',
'2019-01-11',
'2019-02-11',
'2019-02-13',
'2019-03-12',
'2019-04-10',
'2019-05-10',
'2019-06-12',
'2019-07-11',
'2019-08-13',
'2019-09-12',
'2019-10-10',
'2019-11-13',
'2019-12-11',
'2020-01-14',
'2020-02-11',
'2020-02-13',
'2020-03-11',
'2020-04-10',
'2020-05-12',
'2020-06-10',
'2020-07-14',
'2020-08-12',
'2020-09-11',
'2020-10-13',
'2020-11-12',
'2020-12-10',
'2021-01-13',
'2021-02-08',
'2021-02-10',
'2021-03-10',
'2021-04-13',
'2021-05-12',
'2021-06-10',
'2021-07-13',
'2021-08-11',
'2021-09-14',
'2021-10-13',
'2021-11-10',
'2021-12-10',
'2022-01-12',
'2022-02-08',
'2022-02-10',
'2022-03-10',
'2022-04-12',
'2022-05-11',
'2022-06-10',
'2022-07-13',
'2022-08-10',
'2022-09-13',
'2022-10-13',
'2022-11-10',
'2022-12-13',
'2023-01-12',
'2023-02-10',
'2023-02-14',
'2023-03-14',
'2023-04-12',
'2023-05-10',
'2023-06-13',
'2023-07-12',
'2023-08-10',
'2023-09-13',
'2023-10-12',
'2023-11-14',
'2023-12-12',
'2024-01-11',
'2024-02-09',
'2024-02-13',
'2024-03-12',
'2024-04-10',
'2024-05-15',
'2024-06-12',
'2024-07-11',
'2024-08-14',
'2024-09-11',
'2024-10-10',
'2024-11-13',
'2024-12-11',
'2025-01-15',
'2025-02-12',
'2025-03-12',
'2025-04-10',
'2025-05-13',
'2025-06-11',
'2025-07-15',
'2025-08-12',
#2025
"2025-09-11",
"2025-10-15",
"2025-11-13",
"2025-12-10",
] #(tuesdays once a month???)
# SPXL 24Hour trades on the day before CPI seems like a good trade???


# VIX OPEX (third wednesday of every month)
# https://www.macroption.com/vix-expiration-calendar/#2024
vix_opex = [
    # 2025
    "2025-01-22",
    "2025-02-19",
    "2025-03-18",
    "2025-04-16",
    "2025-05-21",
    "2025-06-18",
    "2025-07-16",
    "2025-08-20",
    "2025-09-17",
    "2025-10-22",
    "2025-11-19",
    "2025-12-17",
    # 2024
    "2024-01-17",
    "2024-02-14",
    "2024-03-20",
    "2024-04-17",
    "2024-05-22",
    "2024-06-18",
    "2024-07-17",
    "2024-08-24",
    "2024-09-18",
    "2024-10-16",
    "2024-11-20",
    "2024-12-18",
    # 2023
    "2023-01-18",
    "2023-02-15",
    "2023-03-22",
    "2023-04-19",
    "2023-05-17",
    "2023-06-21",
    "2023-07-19",
    "2023-08-16",
    "2023-09-20",
    "2023-10-18",
    "2023-11-15",
    "2023-12-20",
    # 2022
    "2022-01-19",
    "2022-02-16",
    "2022-03-15",
    "2022-04-20",
    "2022-05-18",
    "2022-06-15",
    "2022-07-20",
    "2022-08-17",
    "2022-09-21",
    "2022-10-19",
    "2022-11-16",
    "2022-12-21",
    # 2021
    "2021-01-21",
    "2021-02-17",
    "2021-03-17",
    "2021-04-21",
    "2021-05-19",
    "2021-06-16",
    "2021-07-21",
    "2021-08-18",
    "2021-09-15",
    "2021-10-20",
    "2021-11-17",
    "2021-12-22",
    # 2020
    "2020-01-22",
    "2020-02-19",
    "2020-03-18",
    "2020-04-15",
    "2020-05-20",
    "2020-06-17",
    "2020-07-22",
    "2020-08-19",
    "2020-09-16",
    "2020-10-21",
    "2020-11-18",
    "2020-12-16",
    # 2019
    "2019-01-16",
    "2019-02-13",
    "2019-03-19",
    "2019-04-17",
    "2019-05-22",
    "2019-06-19",
    "2019-07-17",
    "2019-08-21",
    "2019-09-18",
    "2019-10-16",
    "2019-11-20",
    "2019-12-18",
    # 2018
    "2018-01-17",
    "2018-02-14",
    "2018-03-21",
    "2018-04-18",
    "2018-05-16",
    "2018-06-20",
    "2018-07-18",
    "2018-08-22",
    "2018-09-19",
    "2018-10-17",
    "2018-11-21",
    "2018-12-19",
    # 2017
    "2017-01-18",
    "2017-02-15",
    "2017-03-22",
    "2017-04-19",
    "2017-05-17",
    "2017-06-21",
    "2017-07-19",
    "2017-08-16",
    "2017-09-20",
    "2017-10-18",
    "2017-11-15",
    "2017-12-20",
    # 2016
    "2016-01-20",
    "2016-02-17",
    "2016-03-16",
    "2016-04-20",
    "2016-05-18",
    "2016-06-15",
    "2016-07-20",
    "2016-08-17",
    "2016-09-21",
    "2016-10-19",
    "2016-11-16",
    "2016-12-21",
    # 2015
    "2015-01-21",
    "2015-02-18",
    "2015-03-18",
    "2015-04-15",
    "2015-05-20",
    "2015-06-17",
    "2015-07-22",
    "2015-08-19",
    "2015-09-16",
    "2015-10-21",
    "2015-11-11",
    "2015-12-16",
    # 2014
    "2014-01-22",
    "2014-02-19",
    "2014-03-18",
    "2014-04-16",
    "2014-05-21",
    "2014-06-18",
    "2014-07-16",
    "2014-08-20",
    "2014-09-17",
    "2014-10-22",
    "2014-11-19",
    "2014-12-17",
    # 2013
    "2013-01-16",
    "2013-02-13",
    "2013-03-20",
    "2013-04-17",
    "2013-05-22",
    "2013-06-19",
    "2013-07-17",
    "2013-08-21",
    "2013-09-18",
    "2013-10-16",
    "2013-11-20",
    "2013-12-18",
    # 2012
    "2012-01-18",
    "2012-02-15",
    "2012-03-21",
    "2012-04-18",
    "2012-05-16",
    "2012-06-20",
    "2012-07-18",
    "2012-08-22",
    "2012-09-19",
    "2012-10-17",
    "2012-11-21",
    "2012-12-19",
    # 2011
    "2011-01-19",
    "2011-02-16",
    "2011-03-16",
    "2011-04-20",
    "2011-05-18",
    "2011-06-15",
    "2011-07-20",
    "2011-08-17",
    "2011-09-21",
    "2011-10-19",
    "2011-11-16",
    "2011-12-21",
    # 2010
    "2010-01-20",
    "2010-02-17",
"2010-03-17",
"2010-04-21",
"2010-05-19",
"2010-06-16",
"2010-07-21",
"2010-08-18",
"2010-09-15",
"2010-10-20",
"2010-11-17",
"2010-12-22",
    #2009
"2009-01-21",
"2009-02-18",
"2009-03-18",
"2009-04-15",
"2009-05-20",
"2009-06-17",
"2009-07-22",
"2009-08-19",
"2009-09-16",
"2009-10-21",
"2009-11-18",
"2009-12-16",
    # 2008
"2008-01-16",
"2008-02-19",
"2008-03-19",
"2008-04-16",
"2008-05-21",
"2008-06-18",
"2008-07-16",
"2008-08-20",
"2008-09-17",
"2008-10-22",
"2008-11-19",
"2008-12-17"
    # 2007
"2007-01-17",
"2007-02-14",
"2007-03-21",
"2007-04-18",
"2007-05-16",
"2007-06-20",
"2007-07-18",
"2007-08-22",
"2007-09-19",
"2007-10-17",
"2007-11-21",
"2007-12-19",
    # 2006
"2006-01-18",
"2006-02-15",
"2006-03-22",
"2006-04-19",
"2006-05-17",
"2006-06-21",
"2006-07-19",
"2006-08-16",
"2006-09-20",
"2006-10-18",
"2006-11-15",
"2006-12-20",
    # 2005
"2005-01-19",
"2005-02-16",
"2005-03-16",
"2005-05-18",
"2005-06-15",
"2005-08-17",
"2005-10-19",
"2005-11-16",
"2005-12-21",
    # 2004
"2004-04-19",
"2004-06-16",
"2004-07-14",
"2004-08-18",
"2004-09-16",
"2004-10-13",
"2004-11-17",
]
# Pre-VIX-OPEX C2C SPXL is pretty good, high sharpe.
# Post-VIX-OPEX C2C VIXY and SPXS are pretty good, high sharpe.


# Third Friday of Every Month
spy_opex = [
    # 2025
    "2025-01-17",
    "2025-02-21",
    "2025-03-21",
    "2025-04-18",
    "2025-05-16",
    "2025-06-20",
    "2025-07-18",
    "2025-08-15",
    "2025-09-17",
    "2025-10-21",
    "2025-11-19",
    "2025-12-19",
    # 2024
    "2024-01-18",
    "2024-02-15",
    "2024-03-14",
    "2024-04-18",
    "2024-05-16",
    "2024-06-20",
    "2024-07-18",
    "2024-08-15",
    "2024-09-19",
    "2024-10-17",
    "2024-11-14",
    "2024-12-19",
    # 2023
    "2023-01-20",
    "2023-02-17",
    "2023-03-17",
    "2023-04-21",
    "2023-05-19",
    "2023-06-16",
    "2023-07-21",
    "2023-08-18",
    "2023-09-15",
    "2023-10-20",
    "2023-11-17",
    "2023-12-15",
    # 2022
    "2022-01-21",
    "2022-02-18",
    "2022-03-18",
    "2022-04-14",
    "2022-05-20",
    "2022-06-17",
    "2022-07-15",
    "2022-08-19",
    "2022-09-16",
    "2022-10-21",
    "2022-11-19",
    "2022-12-16",
    # 2021
    "2021-01-15",
    "2021-02-19",
    "2021-03-19",
    "2021-04-16",
    "2021-05-21",
    "2021-06-18",
    "2021-07-16",
    "2021-08-20",
    "2021-09-17",
    "2021-10-15",
    "2021-11-19",
    "2021-12-17",
    # 2020
    "2020-01-17",
    "2020-02-21",
    "2020-03-20",
    "2020-04-17",
    "2020-05-15",
    "2020-06-19",
    "2020-07-17",
    "2020-08-21",
    "2020-09-18",
    "2020-10-16",
    "2020-11-20",
    "2020-12-18",
    # 2019
    "2019-01-18",
    "2019-02-15",
    "2019-03-15",
    "2019-04-19",
    "2019-05-17",
    "2019-06-21",
    "2019-07-19",
    "2019-08-16",
    "2019-09-20",
    "2019-10-18",
    "2019-11-15",
    "2019-12-20",
    # 2018
    "2018-01-19",
    "2018-02-16",
    "2018-03-16",
    "2018-04-20",
    "2018-05-18",
    "2018-06-16",
    "2018-07-20",
    "2018-08-17",
    "2018-09-21",
    "2018-10-19",
    "2018-11-16",
    "2018-12-21",
    # 2017
    "2017-01-20",
    "2017-02-17",
    "2017-03-17",
    "2017-04-21",
    "2017-05-19",
    "2017-06-16",
    "2017-07-21",
    "2017-08-18",
    "2017-09-15",
    "2017-10-20",
    "2017-11-17",
    "2017-12-15",
    # 2016
    "2016-01-15",
    "2016-02-19",
    "2016-03-18",
    "2016-04-15",
    "2016-05-20",
    "2016-06-17",
    "2016-07-15",
    "2016-08-19",
    "2016-09-16",
    "2016-10-21",
    "2016-11-18",
    "2016-12-16",
    # 2015
    "2015-01-16",
    "2015-02-20",
    "2015-03-20",
    "2015-04-17",
    "2015-05-15",
    "2015-06-19",
    "2015-07-17",
    "2015-08-21",
    "2015-09-18",
    "2015-10-16",
    "2015-11-20",
    "2015-12-18",
    # 2014
    "2014-01-17",
    "2014-02-21",
    "2014-03-21",
    "2014-04-17",
    "2014-05-16",
    "2014-06-20",
    "2014-07-18",
    "2014-08-15",
    "2014-09-19",
    "2014-10-17",
    "2014-11-21",
    "2014-12-19",
    # 2013
    "2013-01-18",
    "2013-02-15",
    "2013-03-15",
    "2013-04-19",
    "2013-05-17",
    "2013-06-21",
    "2013-07-19",
    "2013-08-16",
    "2013-09-20",
    "2013-10-18",
    "2013-11-15",
    "2013-12-20",
    # 2012
    "2012-01-20",
    "2012-02-17",
    "2012-03-16",
    "2012-04-20",
    "2012-05-18",
    "2012-06-15",
    "2012-07-20",
    "2012-08-17",
    "2012-09-21",
    "2012-10-19",
    "2012-11-16",
    "2012-12-21",
# 2011 Find them?
]
# Pre Short Vol Intraday
# During Long TLT Intraday
# Post - Short Vol Intraday


# When Futures, Equity Options, and Index Options expire
# Basically every 3rd SPY Opex.
triple_witching = [
# 2025
    "2025-03-21",
    "2025-06-20",
    "2025-09-17",
    # 2024
    "2024-03-14",
    "2024-06-20",
    "2024-09-19",
    "2024-12-19",
    # 2023
    "2023-03-17",
    "2023-06-16",
    "2023-09-15",
    "2023-12-15",
    # 2022
    "2022-03-18",
    "2022-06-17",
    "2022-09-16",
    "2022-12-16",
    # 2021
    "2021-03-19",
    "2021-06-18",
    "2021-09-17",
    "2021-12-17",
    # 2020
    "2020-03-20",
    "2020-06-19",
    "2020-09-18",
    "2020-12-18",
    # 2019
    "2019-03-15",
    "2019-06-21",
    "2019-09-20",
    "2019-12-20",
    # 2018
    "2018-03-16",
    "2018-06-16",
    "2018-09-21",
    "2018-12-21",
    # 2017
    "2017-03-17",
    "2017-06-16",
    "2017-09-15",
    "2017-12-15",
    # 2016
    "2016-03-18",
    "2016-06-17",
    "2016-09-16",
    "2016-12-16",
    # 2015
    "2015-03-20",
    "2015-06-19",
    "2015-09-18",
    "2015-12-18",
    # 2014
    "2014-03-21",
    "2014-06-20",
    "2014-09-19",
    "2014-12-19",
    # 2013
    "2013-03-15",
    "2013-06-21",
    "2013-09-20",
    "2013-12-20",
    # 2012
    "2012-03-16",
    "2012-06-15",
    "2012-09-21",
    "2012-12-21",
]
# Pre Short Vol intraday (covered in spy_opex)
# During Long Vol intraday
# Post Short Vol intraday (covered in spy_opex)


vix_triple_witching = [
    # 2025
    "2025-03-18",
    "2025-06-18",
    "2025-09-17",
    "2025-12-17",
    # 2024
    "2024-03-20",
    "2024-06-18",
    "2024-09-18",
    "2024-12-18",
    # 2023
    "2023-03-22",
    "2023-06-21",
    "2023-09-20",
    "2023-12-20",
    # 2022
    "2022-03-15",
    "2022-06-15",
    "2022-09-21",
    "2022-12-21",
    # 2021
    "2021-03-17",
    "2021-06-16",
    "2021-09-15",
    "2021-12-22",
    # 2020
    "2020-03-18",
    "2020-06-17",
    "2020-09-16",
    "2020-12-16",
    # 2019
    "2019-03-19",
    "2019-06-19",
    "2019-09-18",
    "2019-12-18",
    # 2018
    "2018-03-21",
    "2018-06-20",
    "2018-09-19",
    "2018-12-19",
    # 2017
    "2017-03-22",
    "2017-06-21",
    "2017-09-20",
    "2017-12-20",
    # 2016
    "2016-03-16",
    "2016-06-15",
    "2016-09-21",
    "2016-12-21",
    # 2015
    "2015-03-18",
    "2015-06-17",
    "2015-09-16",
    "2015-12-16",
    # 2014
    "2014-03-18",
    "2014-06-18",
    "2014-09-17",
    "2014-12-17",
    # 2013
    "2013-03-20",
    "2013-06-19",
    "2013-09-18",
    "2013-12-18",
    # 2012
    "2012-03-21",
    "2012-06-20",
    "2012-09-19",
    "2012-12-19",
    # 2011
    "2011-03-16",
    "2011-06-15",
    "2011-09-21",
    "2011-12-21",
    # 2010
"2010-03-17",
"2010-06-16",
"2010-09-15",
"2010-12-22",
    #2009
"2009-03-18",
"2009-06-17",
"2009-09-16",
"2009-12-16",
    # 2008
"2008-03-19",
"2008-06-18",
"2008-09-17",
"2008-12-17"
    # 2007
"2007-03-21",
"2007-06-20",
"2007-09-19",
"2007-12-19",
    # 2006
"2006-03-22",
"2006-06-21",
"2006-09-20",
"2006-12-20",
    # 2005
"2005-03-16",
"2005-06-15",
"2005-12-21",
    # 2004
"2004-06-16",
"2004-09-16",
]
# Not interesting?

# SPY but not triple witching
spy_no_witching = [x for x in spy_opex if x not in triple_witching]
# Pre Short Vol intraday (covered in spy_opex)
# During Short Vol intraday
# Post short Vol intraday

vix_no_witching = [x for x in vix_opex if x not in vix_triple_witching]
# Not interesting?

# ADP National Employment Reports?
adp_nat_emp = [
'2011-02-02',
'2011-03-02',
'2011-03-30',
'2011-05-04',
'2011-06-01',
'2011-07-07',
'2011-08-03',
'2011-08-31',
'2011-10-05',
'2011-11-02',
'2011-11-30',
'2012-01-05',
'2012-02-01',
'2012-03-07',
'2012-04-04',
'2012-05-02',
'2012-05-31',
'2012-07-05',
'2012-08-01',
'2012-09-06',
'2012-10-03',
'2012-10-24',
'2012-11-01',
'2012-12-05',
'2013-01-03',
'2013-01-30',
'2013-03-06',
'2013-04-03',
'2013-05-01',
'2013-06-05',
'2013-07-03',
'2013-07-31',
'2013-09-05',
'2013-10-02',
'2013-10-30',
'2013-12-04',
'2014-01-08',
'2014-02-05',
'2014-03-05',
'2014-04-02',
'2014-04-30',
'2014-06-04',
'2014-07-02',
'2014-07-30',
'2014-09-04',
'2014-10-01',
'2014-11-05',
'2014-12-03',
'2015-01-07',
'2015-02-04',
'2015-03-04',
'2015-04-01',
'2015-05-06',
'2015-06-03',
'2015-07-01',
'2015-08-05',
'2015-09-02',
'2015-09-30',
'2015-11-04',
'2015-12-02',
'2016-01-06',
'2016-02-03',
'2016-03-02',
'2016-03-30',
'2016-05-04',
'2016-06-02',
'2016-07-07',
'2016-08-03',
'2016-08-31',
'2016-10-05',
'2016-11-02',
'2016-11-30',
'2017-01-05',
'2017-02-01',
'2017-03-08',
'2017-04-05',
'2017-05-03',
'2017-06-01',
'2017-07-06',
'2017-08-02',
'2017-08-30',
'2017-10-04',
'2017-11-01',
'2017-12-06',
'2018-01-04',
'2018-01-31',
'2018-03-07',
'2018-04-04',
'2018-05-02',
'2018-05-30',
'2018-07-05',
'2018-08-01',
'2018-09-06',
'2018-10-03',
'2018-10-31',
'2018-12-06',
'2019-01-03',
'2019-01-30',
'2019-03-06',
'2019-04-03',
'2019-05-01',
'2019-06-05',
'2019-07-03',
'2019-07-31',
'2019-09-05',
'2019-10-02',
'2019-10-30',
'2019-12-04',
'2020-01-08',
'2020-02-05',
'2020-03-04',
'2020-04-01',
'2020-05-06',
'2020-06-03',
'2020-07-01',
'2020-08-05',
'2020-09-02',
'2020-09-30',
'2020-11-04',
'2020-12-02',
'2021-01-06',
'2021-02-03',
'2021-03-03',
'2021-03-31',
'2021-05-05',
'2021-06-03',
'2021-06-30',
'2021-08-04',
'2021-09-01',
'2021-10-06',
'2021-11-03',
'2021-12-01',
'2022-01-05',
'2022-02-02',
'2022-03-02',
'2022-03-30',
'2022-05-04',
'2022-06-02',
'2022-08-31',
'2022-10-05',
'2022-11-02',
'2022-11-30',
'2023-01-05',
'2023-02-01',
'2023-03-08',
'2023-04-05',
'2023-05-03',
'2023-06-01',
'2023-07-06',
'2023-08-02',
'2023-08-30',
'2023-10-04',
'2023-11-01',
'2023-12-06',
'2024-01-04',
'2024-01-31',
'2024-03-06',
'2024-04-03',
'2024-05-01',
'2024-06-05',
'2024-07-03',
'2024-07-31',
'2024-09-05',
'2024-10-02',
'2024-10-30',
'2024-12-04',
'2025-01-08',
'2025-02-05',
'2025-03-05',
'2025-04-02',
'2025-04-30',
'2025-06-04',
'2025-07-02',
'2025-07-30',
]
# During Short Vol 24HR


# Let's get weekdays!
all_dates = yf.download("SPY", start=start_date, end=today)
weekday_used = "Friday"
weekday = list(all_dates[pd.to_datetime(all_dates.index).day_name() == weekday_used].index.astype(str).str[:10])
# SPXL does well on Tuesdays 24HR

# Let's get First/Last day of the trading month:
temp = all_dates
temp["month_year"] = pd.to_datetime(temp.index).month.astype(str) + " " + pd.to_datetime(temp.index).year.astype(str)
temp["day"] = pd.to_datetime(temp.index).day
temp["date"] = temp.index
first_day = list(temp.groupby("month_year")["date"].first().astype(str).str[:10])
# First Day of month (close to close)
# During Event - GLD 24HR, EEM 24HR SPY 24HR
last_day = list(temp.groupby("month_year")["date"].last().astype(str).str[:10])
# Last day. Dunno.

# Mid-week? the 15th or after.
mid_week = temp[temp["day"] >= 15]
mid_week = list(mid_week.groupby("month_year")["date"].first().astype(str).str[:10])
# Pre intraday Short Vol (or intraday)
# Post intraday Short Vol (or intraday)


# Create a combination of events, or make each one separate by commenting things in/out.
event_dates = []
event_dates += fomc_meeting_dates
event_dates += fomc_minutes_release_dates
#event_dates += beige_book
#event_dates += vix_opex
#event_dates += vix_triple_witching
#event_dates += vix_no_witching
#event_dates += spy_opex
#event_dates += triple_witching
#event_dates += spy_no_witching
#event_dates += weekday
#event_dates += first_day # of each month
#event_dates += last_day # of each month
#event_dates += mid_week # first trading day on the 15th or after
#event_dates += adp_nat_emp
#event_dates += cpi_dates




# Print the Event Days, just so we know what they are
print(event_dates)

# Get ETF daily data from 2005-01-01 to now:
tickers = ["VIXY", "SVXY", "SPY", "TLT", "GLD", "EEM"]
all_data = []
for ticker in tickers:
    temp_data = yf.download(ticker, start=start_date, end=today)
    temp_data.columns = temp_data.columns.droplevel(1)
    for price in ["Open", "High", "Low", "Close"]:
        temp_data[f"{price}_prior"] = temp_data[price].shift(1)
    # We have 24-hour, 8-hour (intraday) and ~16-hour (overnight)
    # Overnight
    #temp_data["Day_Return"] = (temp_data["Open"] - temp_data["Close"].shift(1)) / temp_data["Close"].shift(1)
    # Intraday
    #temp_data["Day_Return"] = (temp_data["Close"] - temp_data["Open"]) / temp_data["Open"]
    # 24 hour:
    temp_data["Day_Return"] = (temp_data["Close"] - temp_data["Close"].shift(1)) / temp_data["Close"].shift(1)
    temp_data = temp_data.add_suffix(f"_{ticker}")
    all_data.append(temp_data)

all_data = pd.concat(all_data, axis = 1)
all_data["date"] = all_data.index.strftime("%Y-%m-%d")
all_data["prior_trading_day"] = all_data["date"].shift(1)
all_data["next_trading_day"] = all_data["date"].shift(-1)
all_data["weekday"] = all_data.index.day_name()


all_data["pre_event_day"] = np.where(all_data["next_trading_day"].isin(event_dates), 1, 0)
all_data["event_day"] = np.where(all_data["date"].isin(event_dates), 1, 0)
all_data["post_event_day"] = np.where(all_data["prior_trading_day"].isin(event_dates), 1, 0)

# Now, let's limit to Event Pre/During/Post days
all_data = all_data[
    (all_data["pre_event_day"] == 1) | (all_data["event_day"] == 1) | (all_data["post_event_day"] == 1)
]


# What if we ignore any days where: VIX > VIX3M, (Would need to add ^VIX and ^VIX3M to the tickers list.)
#all_data = all_data[all_data["Close_prior_^VIX"] < all_data["Close_prior_^VIX3M"]]

# Let's look at the return data for each:
# Let's Take a look at the Metrics:
i = 0
name_list = ["Pre-Event", "During-Event", "Post-Event", "All Trades Together"]
for _data in [all_data[all_data["pre_event_day"] == 1], all_data[all_data["event_day"] == 1], all_data[all_data["post_event_day"] == 1], all_data,]:
    for ticker in tickers:
        #print(_data.to_string())
        print(f"{name_list[i]} {ticker} trade count: ", len(_data))
        temp = ((1+_data[f"Day_Return_{ticker}"]).cumprod() - 1)[-1]
        print(f"{name_list[i]} {ticker} Total Returns: ", round(temp*100, 2), "%")
        print(f"{name_list[i]} {ticker} Percent of Trades Profitable: ", round(np.where(_data[f"Day_Return_{ticker}"] > 0, 1, 0).mean() * 100, 2), "%")
        print(f"{name_list[i]} {ticker} Avg Return pct: ", round(_data[f"Day_Return_{ticker}"].mean() * 100, 2),"%")
        print(f"{name_list[i]} {ticker} Sharpe:", round((_data[f"Day_Return_{ticker}"].mean()- risk_free_rate) /_data[f"Day_Return_{ticker}"].std()*np.sqrt(252), 2))
        print(f"{name_list[i]} {ticker} Sortino:", round((_data[f"Day_Return_{ticker}"].mean() - risk_free_rate) / np.where(_data[f"Day_Return_{ticker}"] < 0, _data[f"Day_Return_{ticker}"], 0).std() * np.sqrt(252), 2))
        print(f"{name_list[i]} {ticker} Profit Factor:", round(np.where(_data[f"Day_Return_{ticker}"]>0, _data[f"Day_Return_{ticker}"],0).sum()/np.where(_data[f"Day_Return_{ticker}"]<0, -_data[f"Day_Return_{ticker}"],0).sum(), 2))
        print("\n")
    i+=1


if show_plots:
    # Let's plot the Data:
    # Pre-Event
    plt.figure(dpi=150)
    plt.xticks(rotation=45)
    plt.suptitle(f"Pre-Event Day Returns for {tickers}")
    plt.title(f"Profit over time period") # Get the dates from X to Y as well.
    legend_list = []
    for ticker in tickers:
        temp2 = ticker
        temp_data = all_data[all_data["pre_event_day"] ==1]
        plt.plot(pd.to_datetime(temp_data["date"]), (1 + temp_data[f"Day_Return_{ticker}"]).cumprod(), label=temp2)
        legend_list.append(temp2)
    plt.legend(legend_list)
    plt.legend(bbox_to_anchor=(1.05, 1.0), loc='upper left')
    plt.tight_layout()
    plt.show()


    # During-FOMC
    plt.figure(dpi=150)
    plt.xticks(rotation=45)
    plt.suptitle(f"Event Day Returns for {tickers}")
    plt.title(f"Profit over time period") # Get the dates from X to Y as well.
    legend_list = []
    for ticker in tickers:
        temp2 = ticker
        temp_data = all_data[all_data["event_day"] ==1]
        plt.plot(pd.to_datetime(temp_data["date"]), (1 + temp_data[f"Day_Return_{ticker}"]).cumprod(), label=temp2)
        legend_list.append(temp2)
    plt.legend(legend_list)
    plt.legend(bbox_to_anchor=(1.05, 1.0), loc='upper left')
    plt.tight_layout()
    plt.show()


    # Post-FOMC
    plt.figure(dpi=150)
    plt.xticks(rotation=45)
    plt.suptitle(f"Post-Event Day Returns for {tickers}")
    plt.title(f"Profit over time period") # Get the dates from X to Y as well.
    legend_list = []
    for ticker in tickers:
        temp2 = ticker
        temp_data = all_data[all_data["post_event_day"] ==1]
        plt.plot(pd.to_datetime(temp_data["date"]), (1 + temp_data[f"Day_Return_{ticker}"]).cumprod(), label=temp2)
        legend_list.append(temp2)
    plt.legend(legend_list)
    plt.legend(bbox_to_anchor=(1.05, 1.0), loc='upper left')
    plt.tight_layout()
    plt.show()


